(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c37c6b7"],{"0d91":function(t,e,i){},1681:function(t,e,i){},"1ae4":function(t,e,i){t.exports=i.p+"img/logo.9d77e27b.svg"},"20f6":function(t,e,i){},"22da":function(t,e,i){"use strict";var n=i("490a");e["a"]=n["a"]},"30fd":function(t,e,i){},"368e":function(t,e,i){},"3a6b":function(t,e,i){"use strict";i("5960")},"3c93":function(t,e,i){},"490a":function(t,e,i){"use strict";i("a9e3"),i("99af"),i("8d4f");var n=i("90a2"),s=i("a9ad"),a=i("80d2");e["a"]=s["a"].extend({name:"v-progress-circular",directives:{intersect:n["a"]},props:{button:Boolean,indeterminate:Boolean,rotate:{type:[Number,String],default:0},size:{type:[Number,String],default:32},width:{type:[Number,String],default:4},value:{type:[Number,String],default:0}},data:function(){return{radius:20,isVisible:!0}},computed:{calculatedSize:function(){return Number(this.size)+(this.button?8:0)},circumference:function(){return 2*Math.PI*this.radius},classes:function(){return{"v-progress-circular--visible":this.isVisible,"v-progress-circular--indeterminate":this.indeterminate,"v-progress-circular--button":this.button}},normalizedValue:function(){return this.value<0?0:this.value>100?100:parseFloat(this.value)},strokeDashArray:function(){return Math.round(1e3*this.circumference)/1e3},strokeDashOffset:function(){return(100-this.normalizedValue)/100*this.circumference+"px"},strokeWidth:function(){return Number(this.width)/+this.size*this.viewBoxSize*2},styles:function(){return{height:Object(a["g"])(this.calculatedSize),width:Object(a["g"])(this.calculatedSize)}},svgStyles:function(){return{transform:"rotate(".concat(Number(this.rotate),"deg)")}},viewBoxSize:function(){return this.radius/(1-Number(this.width)/+this.size)}},methods:{genCircle:function(t,e){return this.$createElement("circle",{class:"v-progress-circular__".concat(t),attrs:{fill:"transparent",cx:2*this.viewBoxSize,cy:2*this.viewBoxSize,r:this.radius,"stroke-width":this.strokeWidth,"stroke-dasharray":this.strokeDashArray,"stroke-dashoffset":e}})},genSvg:function(){var t=[this.indeterminate||this.genCircle("underlay",0),this.genCircle("overlay",this.strokeDashOffset)];return this.$createElement("svg",{style:this.svgStyles,attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"".concat(this.viewBoxSize," ").concat(this.viewBoxSize," ").concat(2*this.viewBoxSize," ").concat(2*this.viewBoxSize)}},t)},genInfo:function(){return this.$createElement("div",{staticClass:"v-progress-circular__info"},this.$slots.default)},onObserve:function(t,e,i){this.isVisible=i}},render:function(t){return t("div",this.setTextColor(this.color,{staticClass:"v-progress-circular",attrs:{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":this.indeterminate?void 0:this.normalizedValue},class:this.classes,directives:[{name:"intersect",value:this.onObserve}],style:this.styles,on:this.$listeners}),[this.genSvg(),this.genInfo()])}})},"548d":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Layout",[t.issues.length?t._e():i("h2",{staticClass:"mt-4"},[t._v("Инцидентов нет")]),i("div",{staticClass:"issue-cards mt-4"},t._l(t.issues,(function(t){return i("IssueCard",{attrs:{issue:t}})})),1),i("CreateIssueModal",{ref:"createIssueModal",attrs:{"organization-id":t.organizationId},on:{issueCreate:t.loadIssues}}),i("v-btn",{staticStyle:{bottom:"10px"},attrs:{dark:"",absolute:"",right:"",fab:"",color:"#1560A1"},on:{click:function(e){return t.$refs.createIssueModal.open()}}},[i("v-icon",[t._v("add")])],1)],1)},s=[],a=(i("4e827"),i("ebad")),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card-base issue-card",class:{"warning-card":t.waitingForFileUpload}},[i("div",{staticClass:"top"},[i("div",{staticClass:"title d-flex align-center"},[t.waitingForFileUpload?i("v-icon",{staticClass:"mr-2",attrs:{size:"25",color:"#D97706"}},[t._v(" error ")]):t._e(),i("span",[t._v(t._s(t.issue.issueTitle))])],1),t.issue.isSatellite?i("div",{staticClass:"satellite"},[i("Icon",{attrs:{size:"30",name:"satellite"}})],1):t._e()]),i("div",{staticClass:"description",domProps:{innerHTML:t._s(t.issue.issueDescription)}}),i("div",{staticClass:"action"},[t.waitingForFileUpload?i("v-btn",{attrs:{text:"",color:"#D97706",loading:t.fileUploadInProcess},on:{click:t.showFileUploadWindow}},[i("v-icon",{attrs:{left:""}},[t._v("upload_file")]),t._v(" Прикрепить фото ")],1):i("v-btn",{attrs:{text:"",color:"#1560A1"}},[i("v-icon",{attrs:{left:""}},[t._v("file_download")]),t._v(" Отчет ")],1)],1),i("input",{ref:"fileInput",staticClass:"d-none",attrs:{type:"file",multiple:""},on:{input:t.uploadSelectedFiles}})])},o=[],c=i("1da1"),l=(i("96cf"),i("cdae")),u=i("d4ec"),d=i("bee2"),h=(i("d3b7"),i("159b"),i("79b1")),v=i("1bd3"),f=function(){function t(){Object(u["a"])(this,t)}return Object(d["a"])(t,null,[{key:"uploadIssueFiles",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,i){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new FormData,e.forEach((function(t){return n.append("files",t)})),s=Object(h["a"])("/api/upload",{issueId:i}),t.next=5,Object(v["a"])().post(s,n);case 5:case"end":return t.stop()}}),t)})));function e(e,i){return t.apply(this,arguments)}return e}()}]),t}(),p={name:"IssueCard",components:{Icon:l["a"]},props:{issue:{type:Object,required:!0}},data:function(){return{uploadFiles:[],fileUploadInProcess:!1}},computed:{waitingForFileUpload:function(){return"WAIT_PHOTO"===this.issue.issueStatus}},methods:{uploadSelectedFiles:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=t.target.files,e.fileUploadInProcess=!0,i.prev=2,i.next=5,f.uploadIssueFiles(n,e.issue.issueId);case 5:e.$emit("issueCreate"),i.next=12;break;case 8:i.prev=8,i.t0=i["catch"](2),alert("Error"),console.error(i.t0);case 12:return i.prev=12,e.fileUploadInProcess=!1,i.finish(12);case 15:case"end":return i.stop()}}),i,null,[[2,8,12,15]])})))()},showFileUploadWindow:function(){this.$refs.fileInput.dispatchEvent(new MouseEvent("click"))}}},m=p,b=(i("6685"),i("2877")),g=i("6544"),y=i.n(g),w=i("53ca"),O=i("3835"),x=i("5530"),C=(i("c7cd"),i("a9e3"),i("caad"),i("e9c4"),i("86cc"),i("8dd9")),I=C["a"],k=i("22da"),_=i("4e82"),S=i("f2e7"),$=i("c995"),B=i("fe6c"),j=i("1c87"),E=i("af2b"),z=i("58df"),A=i("d9bd"),F=Object(z["a"])(I,j["a"],B["a"],E["a"],Object(_["a"])("btnToggle"),Object(S["b"])("inputValue")),T=F.extend().extend({name:"v-btn",props:{activeClass:{type:String,default:function(){return this.btnToggle?this.btnToggle.activeClass:""}},block:Boolean,depressed:Boolean,fab:Boolean,icon:Boolean,loading:Boolean,outlined:Boolean,plain:Boolean,retainFocusOnClick:Boolean,rounded:Boolean,tag:{type:String,default:"button"},text:Boolean,tile:Boolean,type:{type:String,default:"button"},value:null},data:function(){return{proxyClass:"v-btn--active"}},computed:{classes:function(){return Object(x["a"])(Object(x["a"])(Object(x["a"])(Object(x["a"])(Object(x["a"])({"v-btn":!0},j["a"].options.computed.classes.call(this)),{},{"v-btn--absolute":this.absolute,"v-btn--block":this.block,"v-btn--bottom":this.bottom,"v-btn--disabled":this.disabled,"v-btn--is-elevated":this.isElevated,"v-btn--fab":this.fab,"v-btn--fixed":this.fixed,"v-btn--has-bg":this.hasBg,"v-btn--icon":this.icon,"v-btn--left":this.left,"v-btn--loading":this.loading,"v-btn--outlined":this.outlined,"v-btn--plain":this.plain,"v-btn--right":this.right,"v-btn--round":this.isRound,"v-btn--rounded":this.rounded,"v-btn--router":this.to,"v-btn--text":this.text,"v-btn--tile":this.tile,"v-btn--top":this.top},this.themeClasses),this.groupClasses),this.elevationClasses),this.sizeableClasses)},computedElevation:function(){if(!this.disabled)return $["a"].options.computed.computedElevation.call(this)},computedRipple:function(){var t,e=!this.icon&&!this.fab||{circle:!0};return!this.disabled&&(null!=(t=this.ripple)?t:e)},hasBg:function(){return!this.text&&!this.plain&&!this.outlined&&!this.icon},isElevated:function(){return Boolean(!this.icon&&!this.text&&!this.outlined&&!this.depressed&&!this.disabled&&!this.plain&&(null==this.elevation||Number(this.elevation)>0))},isRound:function(){return Boolean(this.icon||this.fab)},styles:function(){return Object(x["a"])({},this.measurableStyles)}},created:function(){var t=this,e=[["flat","text"],["outline","outlined"],["round","rounded"]];e.forEach((function(e){var i=Object(O["a"])(e,2),n=i[0],s=i[1];t.$attrs.hasOwnProperty(n)&&Object(A["a"])(n,s,t)}))},methods:{click:function(t){!this.retainFocusOnClick&&!this.fab&&t.detail&&this.$el.blur(),this.$emit("click",t),this.btnToggle&&this.toggle()},genContent:function(){return this.$createElement("span",{staticClass:"v-btn__content"},this.$slots.default)},genLoader:function(){return this.$createElement("span",{class:"v-btn__loader"},this.$slots.loader||[this.$createElement(k["a"],{props:{indeterminate:!0,size:23,width:2}})])}},render:function(t){var e=[this.genContent(),this.loading&&this.genLoader()],i=this.generateRouteLink(),n=i.tag,s=i.data,a=this.hasBg?this.setBackgroundColor:this.setTextColor;return"button"===n&&(s.attrs.type=this.type,s.attrs.disabled=this.disabled),s.attrs.value=["string","number"].includes(Object(w["a"])(this.value))?this.value:JSON.stringify(this.value),t(n,this.disabled?s:a(this.color,s),e)}}),N=i("132d"),V=Object(b["a"])(m,r,o,!1,null,"fc4a8934",null),L=V.exports;y()(V,{VBtn:T,VIcon:N["a"]});var D=i("8c27"),H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{width:"500",persistent:"",value:t.isOpen}},[i("v-form",{ref:"createForm",on:{submit:function(e){return e.preventDefault(),t.createIssue.apply(null,arguments)}}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"text-h5"},[t._v("Новая инцидент")])]),i("v-card-text",[i("v-text-field",{attrs:{label:"Название",disabled:t.isFormSubmitting,rules:[function(t){return!!t||"Обазятальное поле"}]},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),i("v-textarea",{attrs:{label:"Описание","no-resize":"",disabled:t.isFormSubmitting,rules:[function(t){return!!t||"Обазятальное поле"}]},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{text:"",disabled:t.isFormSubmitting},on:{click:t.resetAndClose}},[t._v("Закрыть")]),i("v-btn",{attrs:{color:"#1560A1",dark:"",type:"submit",loading:t.isFormSubmitting}},[t._v(" Создать ")])],1)],1)],1)],1)},P=[],R=(i("a4d3"),i("e01a"),{name:"CreateIssueModal",props:{organizationId:{type:Number,required:!0}},data:function(){return{isOpen:!1,title:null,description:null,isFormSubmitting:!1}},methods:{open:function(){this.isOpen=!0},resetAndClose:function(){this.$refs.createForm.reset(),this.isOpen=!1},createIssue:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$refs.createForm.validate()){e.next=2;break}return e.abrupt("return");case 2:return i={plantId:t.organizationId,issueTitle:t.title,issueDescription:t.description,isSatellite:!1,issueStatus:"WAIT_PHOTO"},t.isFormSubmitting=!0,e.prev=4,e.next=7,D["a"].createIssue(i);case 7:t.$emit("issueCreate"),t.resetAndClose(),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](4),alert("Error"),console.error(e.t0);case 15:return e.prev=15,t.isFormSubmitting=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[4,11,15,18]])})))()}}}),W=R,M=(i("0481"),i("4069"),i("615b"),i("297c")),U=Object(z["a"])(M["a"],j["a"],I).extend({name:"v-card",props:{flat:Boolean,hover:Boolean,img:String,link:Boolean,loaderHeight:{type:[Number,String],default:4},raised:Boolean},computed:{classes:function(){return Object(x["a"])(Object(x["a"])({"v-card":!0},j["a"].options.computed.classes.call(this)),{},{"v-card--flat":this.flat,"v-card--hover":this.hover,"v-card--link":this.isClickable,"v-card--loading":this.loading,"v-card--disabled":this.disabled,"v-card--raised":this.raised},I.options.computed.classes.call(this))},styles:function(){var t=Object(x["a"])({},I.options.computed.styles.call(this));return this.img&&(t.background='url("'.concat(this.img,'") center center / cover no-repeat')),t}},methods:{genProgress:function(){var t=M["a"].options.methods.genProgress.call(this);return t?this.$createElement("div",{staticClass:"v-card__progress",key:"progress"},[t]):null}},render:function(t){var e=this.generateRouteLink(),i=e.tag,n=e.data;return n.style=this.styles,this.isClickable&&(n.attrs=n.attrs||{},n.attrs.tabindex=0),t(i,this.setBackgroundColor(this.color,n),[this.genProgress(),this.$slots.default])}}),q=i("80d2"),G=Object(q["h"])("v-card__actions"),Z=(Object(q["h"])("v-card__subtitle"),Object(q["h"])("v-card__text")),Y=Object(q["h"])("v-card__title"),K=i("2909"),X=i("ade3"),J=(i("498a"),i("2532"),i("7db0"),i("368e"),i("480e")),Q=i("4ad4"),tt=i("b848"),et=i("75eb"),it=(i("3c93"),i("a9ad")),nt=i("7560"),st=Object(z["a"])(it["a"],nt["a"],S["a"]).extend({name:"v-overlay",props:{absolute:Boolean,color:{type:String,default:"#212121"},dark:{type:Boolean,default:!0},opacity:{type:[Number,String],default:.46},value:{default:!0},zIndex:{type:[Number,String],default:5}},computed:{__scrim:function(){var t=this.setBackgroundColor(this.color,{staticClass:"v-overlay__scrim",style:{opacity:this.computedOpacity}});return this.$createElement("div",t)},classes:function(){return Object(x["a"])({"v-overlay--absolute":this.absolute,"v-overlay--active":this.isActive},this.themeClasses)},computedOpacity:function(){return Number(this.isActive?this.opacity:0)},styles:function(){return{zIndex:this.zIndex}}},methods:{genContent:function(){return this.$createElement("div",{staticClass:"v-overlay__content"},this.$slots.default)}},render:function(t){var e=[this.__scrim];return this.isActive&&e.push(this.genContent()),t("div",{staticClass:"v-overlay",on:this.$listeners,class:this.classes,style:this.styles},e)}}),at=st,rt=i("2b0e"),ot=rt["a"].extend().extend({name:"overlayable",props:{hideOverlay:Boolean,overlayColor:String,overlayOpacity:[Number,String]},data:function(){return{animationFrame:0,overlay:null}},watch:{hideOverlay:function(t){this.isActive&&(t?this.removeOverlay():this.genOverlay())}},beforeDestroy:function(){this.removeOverlay()},methods:{createOverlay:function(){var t=new at({propsData:{absolute:this.absolute,value:!1,color:this.overlayColor,opacity:this.overlayOpacity}});t.$mount();var e=this.absolute?this.$el.parentNode:document.querySelector("[data-app]");e&&e.insertBefore(t.$el,e.firstChild),this.overlay=t},genOverlay:function(){var t=this;if(this.hideScroll(),!this.hideOverlay)return this.overlay||this.createOverlay(),this.animationFrame=requestAnimationFrame((function(){t.overlay&&(void 0!==t.activeZIndex?t.overlay.zIndex=String(t.activeZIndex-1):t.$el&&(t.overlay.zIndex=Object(q["q"])(t.$el)),t.overlay.value=!0)})),!0},removeOverlay:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.overlay&&(Object(q["a"])(this.overlay.$el,"transitionend",(function(){t.overlay&&t.overlay.$el&&t.overlay.$el.parentNode&&!t.overlay.value&&!t.isActive&&(t.overlay.$el.parentNode.removeChild(t.overlay.$el),t.overlay.$destroy(),t.overlay=null)})),cancelAnimationFrame(this.animationFrame),this.overlay.value=!1),e&&this.showScroll()},scrollListener:function(t){if("keydown"===t.type){if(["INPUT","TEXTAREA","SELECT"].includes(t.target.tagName)||t.target.isContentEditable)return;var e=[q["s"].up,q["s"].pageup],i=[q["s"].down,q["s"].pagedown];if(e.includes(t.keyCode))t.deltaY=-1;else{if(!i.includes(t.keyCode))return;t.deltaY=1}}(t.target===this.overlay||"keydown"!==t.type&&t.target===document.body||this.checkPath(t))&&t.preventDefault()},hasScrollbar:function(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;var e=window.getComputedStyle(t);return(["auto","scroll"].includes(e.overflowY)||"SELECT"===t.tagName)&&t.scrollHeight>t.clientHeight||["auto","scroll"].includes(e.overflowX)&&t.scrollWidth>t.clientWidth},shouldScroll:function(t,e){if(t.hasAttribute("data-app"))return!1;var i,n,s=e.shiftKey||e.deltaX?"x":"y",a="y"===s?e.deltaY:e.deltaX||e.deltaY;"y"===s?(i=0===t.scrollTop,n=t.scrollTop+t.clientHeight===t.scrollHeight):(i=0===t.scrollLeft,n=t.scrollLeft+t.clientWidth===t.scrollWidth);var r=a<0,o=a>0;return!(i||!r)||(!(n||!o)||!(!i&&!n)&&this.shouldScroll(t.parentNode,e))},isInside:function(t,e){return t===e||null!==t&&t!==document.body&&this.isInside(t.parentNode,e)},checkPath:function(t){var e=Object(q["f"])(t);if("keydown"===t.type&&e[0]===document.body){var i=this.$refs.dialog,n=window.getSelection().anchorNode;return!(i&&this.hasScrollbar(i)&&this.isInside(n,i))||!this.shouldScroll(i,t)}for(var s=0;s<e.length;s++){var a=e[s];if(a===document)return!0;if(a===document.documentElement)return!0;if(a===this.$refs.content)return!0;if(this.hasScrollbar(a))return!this.shouldScroll(a,t)}return!0},hideScroll:function(){this.$vuetify.breakpoint.smAndDown?document.documentElement.classList.add("overflow-y-hidden"):(Object(q["b"])(window,"wheel",this.scrollListener,{passive:!1}),window.addEventListener("keydown",this.scrollListener))},showScroll:function(){document.documentElement.classList.remove("overflow-y-hidden"),window.removeEventListener("wheel",this.scrollListener),window.removeEventListener("keydown",this.scrollListener)}}}),ct=i("e4d3"),lt=i("21be"),ut=i("a293"),dt=Object(z["a"])(Q["a"],tt["a"],et["a"],ot,ct["a"],lt["a"],S["a"]),ht=dt.extend({name:"v-dialog",directives:{ClickOutside:ut["a"]},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:{type:[String,Number],default:"none"},noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:{type:[String,Number],default:"auto"}},data:function(){return{activatedBy:null,animate:!1,animateTimeout:-1,isActive:!!this.value,stackMinZIndex:200,previousActiveElement:null}},computed:{classes:function(){var t;return t={},Object(X["a"])(t,"v-dialog ".concat(this.contentClass).trim(),!0),Object(X["a"])(t,"v-dialog--active",this.isActive),Object(X["a"])(t,"v-dialog--persistent",this.persistent),Object(X["a"])(t,"v-dialog--fullscreen",this.fullscreen),Object(X["a"])(t,"v-dialog--scrollable",this.scrollable),Object(X["a"])(t,"v-dialog--animated",this.animate),t},contentClasses:function(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator:function(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive:function(t){var e;t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null==(e=this.previousActiveElement)||e.focus())},fullscreen:function(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created:function(){this.$attrs.hasOwnProperty("full-width")&&Object(A["d"])("full-width",this)},beforeMount:function(){var t=this;this.$nextTick((function(){t.isBooted=t.isActive,t.isActive&&t.show()}))},beforeDestroy:function(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick:function(){var t=this;this.animate=!1,this.$nextTick((function(){t.animate=!0,window.clearTimeout(t.animateTimeout),t.animateTimeout=window.setTimeout((function(){return t.animate=!1}),150)}))},closeConditional:function(t){var e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e)||this.overlay&&e&&!this.overlay.$el.contains(e))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll:function(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):ot.options.methods.hideScroll.call(this)},show:function(){var t=this;!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick((function(){t.$nextTick((function(){t.$refs.content.contains(document.activeElement)||(t.previousActiveElement=document.activeElement,t.$refs.content.focus()),t.bind()}))}))},bind:function(){window.addEventListener("focusin",this.onFocusin)},unbind:function(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside:function(t){this.$emit("click:outside",t),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown:function(t){if(t.keyCode===q["s"].esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;var e=this.getActivator();this.$nextTick((function(){return e&&e.focus()}))}this.$emit("keydown",t)},onFocusin:function(t){if(t&&this.retainFocus){var e=t.target;if(e&&![document,this.$refs.content].includes(e)&&!this.$refs.content.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some((function(t){return t.contains(e)}))){var i=this.$refs.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),n=Object(K["a"])(i).find((function(t){return!t.hasAttribute("disabled")}));n&&n.focus()}}},genContent:function(){var t=this;return this.showLazyContent((function(){return[t.$createElement(J["a"],{props:{root:!0,light:t.light,dark:t.dark}},[t.$createElement("div",{class:t.contentClasses,attrs:Object(x["a"])({role:"document",tabindex:t.isActive?0:void 0},t.getScopeIdAttrs()),on:{keydown:t.onKeydown},style:{zIndex:t.activeZIndex},ref:"content"},[t.genTransition()])])]}))},genTransition:function(){var t=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[t]):t},genInnerContent:function(){var t={class:this.classes,ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(t.style=Object(x["a"])(Object(x["a"])({},t.style),{},{maxWidth:"none"===this.maxWidth?void 0:Object(q["g"])(this.maxWidth),width:"auto"===this.width?void 0:Object(q["g"])(this.width)})),this.$createElement("div",t,this.getContentSlot())}},render:function(t){return t("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach},attrs:{role:"dialog"}},[this.genActivator(),this.genContent()])}}),vt=(i("07ac"),i("4de4"),i("7e2b")),ft=i("3206"),pt=Object(z["a"])(vt["a"],Object(ft["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,i=function(t){return t.$watch("hasError",(function(i){e.$set(e.errorBag,t._uid,i)}),{immediate:!0})},n={_uid:t._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?n.shouldValidate=t.$watch("shouldValidate",(function(s){s&&(e.errorBag.hasOwnProperty(t._uid)||(n.valid=i(t)))})):n.valid=i(t),n},validate:function(){return 0===this.inputs.filter((function(t){return!t.validate(!0)})).length},reset:function(){this.inputs.forEach((function(t){return t.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(t){return t.resetValidation()})),this.resetErrorBag()},register:function(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister:function(t){var e=this.inputs.find((function(e){return e._uid===t._uid}));if(e){var i=this.watchers.find((function(t){return t._uid===e._uid}));i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter((function(t){return t._uid!==e._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object(x["a"])({novalidate:!0},this.attrs$),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}}),mt=(i("20f6"),Object(q["h"])("spacer","div","v-spacer")),bt=i("8654"),gt=(i("1681"),Object(z["a"])(bt["a"])),yt=gt.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(t){return!isNaN(parseFloat(t))}},rows:{type:[Number,String],default:5,validator:function(t){return!isNaN(parseInt(t,10))}}},computed:{classes:function(){return Object(x["a"])({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},bt["a"].options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{autoGrow:function(t){var e=this;this.$nextTick((function(){var i;t?e.calculateInputHeight():null==(i=e.$refs.input)||i.style.removeProperty("height")}))},lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var t=this;setTimeout((function(){t.autoGrow&&t.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var t=this.$refs.input;if(t){t.style.height="0";var e=t.scrollHeight,i=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(i,e)+"px"}},genInput:function(){var t=bt["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput:function(t){bt["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}}),wt=Object(b["a"])(W,H,P,!1,null,"5cea7fc7",null),Ot=wt.exports;y()(wt,{VBtn:T,VCard:U,VCardActions:G,VCardText:Z,VCardTitle:Y,VDialog:ht,VForm:pt,VSpacer:mt,VTextField:bt["a"],VTextarea:yt});var xt={name:"OrganizationIncidentsView",components:{CreateIssueModal:Ot,IssueCard:L,Layout:a["a"]},data:function(){return{issues:[],organizationId:null}},created:function(){this.organizationId=parseInt(this.$route.params.id)},mounted:function(){this.loadIssues()},methods:{loadIssues:function(){var t=this;D["a"].findByOrganizationId(this.organizationId).then((function(e){t.issues=e.sort((function(t,e){return e.issueStatus.localeCompare(t.issueStatus)}))}))}}},Ct=xt,It=(i("bf41"),Object(b["a"])(Ct,n,s,!1,null,"5f9ba270",null));e["default"]=It.exports;y()(It,{VBtn:T,VIcon:N["a"]})},5960:function(t,e,i){},"615b":function(t,e,i){},6685:function(t,e,i){"use strict";i("c9c0")},"79cb":function(t,e,i){},"86cc":function(t,e,i){},"8d4f":function(t,e,i){},9965:function(t,e,i){"use strict";i("0d91")},bf41:function(t,e,i){"use strict";i("79cb")},c109:function(t,e,i){"use strict";i("30fd")},c5e4:function(t,e,i){t.exports=i.p+"img/avatar.68e85622.jpeg"},c9c0:function(t,e,i){},cdae:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{width:t.computedWidth,height:t.computedHeight}},[i("use",{attrs:{href:"#"+t.name}})])},s=[],a=(i("a9e3"),{name:"Icon",props:{width:{type:Number,required:!1},height:{type:Number,required:!1},size:{type:Number,required:!1},name:{type:String,required:!0}},computed:{computedWidth:function(){var t;return null!==(t=this.width)&&void 0!==t?t:this.size},computedHeight:function(){var t;return null!==(t=this.height)&&void 0!==t?t:this.size}}}),r=a,o=i("2877"),c=Object(o["a"])(r,n,s,!1,null,null,null);e["a"]=c.exports},ebad:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"min-height":"100vh",background:"#f9fbff"}},[i("Sidebar"),i("div",{staticClass:"wrapper"},[t._t("default")],2)],1)},s=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside",[n("router-link",{attrs:{to:"/"}},[n("img",{staticClass:"logo",attrs:{src:i("1ae4"),alt:"Logo"}})]),n("SidebarNavigation"),t._m(0)],1)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("img",{attrs:{src:i("c5e4"),alt:"User avatar"}})])}],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("nav",[i("router-link",{staticClass:"nav-link",attrs:{to:"/organization/"+t.organizationId,exact:""}},[i("Icon",{attrs:{width:36,height:36,name:"info-navigation"}})],1),i("router-link",{staticClass:"nav-link",attrs:{to:"/organization/"+t.organizationId+"/devices"}},[i("Icon",{attrs:{width:40,height:40,name:"device-navigation"}})],1),i("router-link",{staticClass:"nav-link incidents-link",attrs:{to:"/organization/"+t.organizationId+"/incidents"}},[i("v-icon",{attrs:{size:"40",title:"Инциденты"}},[t._v("error")]),t.incidentsCount?i("div",{staticClass:"incidents-count"},[t._v(" "+t._s(t.incidentsCount<10?t.incidentsCount:"9+")+" ")]):t._e()],1)],1)},c=[],l=i("cdae"),u=i("8c27"),d={name:"SidebarNavigation",components:{Icon:l["a"]},data:function(){return{organizationId:null,incidentsCount:0,subscriptionId:null}},created:function(){this.organizationId=this.$route.params.id},mounted:function(){var t=this;this.subscriptionId=u["a"].subscribeToOrganizationIssueUpdates(this.organizationId,(function(e){return t.incidentsCount=e.length}))},destroyed:function(){u["a"].unsubscribeFromOrganizationIssueUpdates(this.subscriptionId)}},h=d,v=(i("9965"),i("2877")),f=i("6544"),p=i.n(f),m=i("132d"),b=Object(v["a"])(h,o,c,!1,null,"b5442592",null),g=b.exports;p()(b,{VIcon:m["a"]});var y={name:"Sidebar",components:{SidebarNavigation:g}},w=y,O=(i("3a6b"),Object(v["a"])(w,a,r,!1,null,"8ee43432",null)),x=O.exports,C={name:"Layout",components:{Sidebar:x}},I=C,k=(i("c109"),Object(v["a"])(I,n,s,!1,null,null,null));e["a"]=k.exports}}]);
//# sourceMappingURL=chunk-2c37c6b7.24cf0f6b.js.map